var e=Object.defineProperty,t=(t,n,a)=>(((t,n,a)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a})(t,"symbol"!=typeof n?n+"":n,a),a);export function __vite_legacy_guard(){import("data:text/javascript,")}import{c as n,v as a,n as r,r as s,d as o,h as l,T as i,g as c,o as u,a as d,w as p,m,b as g,e as f,f as v,u as _,i as h,j as y,k as b,l as w,p as E,q as L,s as k,t as x,x as j,F as S,y as z,z as A}from"./vendor.e09d404b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const I={},O=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`./${e}`)in I)return;I[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e())):e()};var P={en:{welcome:{"app-name":e=>{const{normalize:t}=e;return t(["auto-derby plugin generator"])},start:e=>{const{normalize:t}=e;return t(["Start"])},feedback:e=>{const{normalize:t}=e;return t(["Feedback"])},"generate-race-plugin":e=>{const{normalize:t}=e;return t(["Generate Race Plugin"])}},plugin:{name:e=>{const{normalize:t}=e;return t(["Name"])},generate:e=>{const{normalize:t}=e;return t(["Generate"])}},"race-plugin":{"default-strategy":e=>{const{normalize:t}=e;return t(["Default Strategy"])}}},jp:{},zh:{welcome:{"app-name":e=>{const{normalize:t}=e;return t(["auto-derby 插件生成器"])},start:e=>{const{normalize:t}=e;return t(["开始"])},feedback:e=>{const{normalize:t}=e;return t(["意见反馈"])},"generate-race-plugin":e=>{const{normalize:t}=e;return t(["生成赛程插件"])}},plugin:{name:e=>{const{normalize:t}=e;return t(["名称"])},generate:e=>{const{normalize:t}=e;return t(["生成"])}},"race-plugin":{"default-strategy":e=>{const{normalize:t}=e;return t(["默认策略"])}}}};const R="https://cdn.jsdelivr.net/gh/NateScarlet/auto-derby@master/auto_derby/data/single_mode_races.jsonl",N=Object.keys(P),V=n({legacy:!0,locale:(()=>{if(N.includes(navigator.language))return navigator.language;if(navigator.languages){const e=navigator.languages.find((e=>N.includes(e)));if(e)return e}return"en"})()||"en",fallbackLocale:"en",messages:P});const T=s({messages:[]}),D=o({name:"MessageList",data:()=>T,render(){return l(i,{class:"fixed bottom-0 right-0 flex flex-col-reverse items-end",appear:!0,tag:"ol",moveClass:"transition ease-in-out duration-200",enterActiveClass:"transition ease-in-out duration-300",enterFromClass:"opacity-0 transform translate-x-full",leaveActiveClass:"transition ease-in-out duration-1000",leaveToClass:"opacity-0"},(()=>this.messages.map((e=>{const t=e.render();return t.key=e.key,t}))))}});let C=0;const M=new class{constructor(){t(this,"listeners",new Set)}addEventListener(e){this.listeners.add(e)}removeEventListener(e){this.listeners.delete(e)}async dispatchEvent(...e){const t=[];this.listeners.forEach((n=>{t.push(n(...e))})),await Promise.all(t)}};var W=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",workboxCacheUpdate:M});function U(){const e=[],t=()=>{for(var t;e.length>0;)null==(t=e.pop())||t()};return c()&&u(t),{addCleanup:t=>{e.push(t)},cleanup:t}}function B({updateSW:e}){const t=d(!1);return function(e){const t=C;return C+=1,T.messages.splice(0,0,{key:t,render:e}),()=>{const e=T.messages.findIndex((e=>e.key===t));e<0||T.messages.splice(e,1)}}((()=>l("li",{class:"rounded-sm w-64 mx-2 my-1 bg-gray-100 text-black break-all flex items-center"},[l("button",{class:"form-button w-full inline-flex flex-center py-0 px-2",onClick:async()=>{t.value=!0,await e()}},[l("svg",{viewBox:"0 0 24 24",class:["fill-current h-8 origin-center",t.value?"animate-spin":""]},l("path",{d:t.value?m:g})),l("div",{class:"m-2 flex-auto"},"New version available")])])))}function G(){const e=function(){const e=[],t=()=>{for(var t;e.length>0;)null==(t=e.pop())||t()};return c()&&u(t),{add:t=>{e.push(t)},push:t=>{e.push((()=>t.dispose()))},dispose:t}}();navigator.serviceWorker.addEventListener("message",(async e=>{var t;(t=e)instanceof MessageEvent&&"workbox-broadcast-update"===t.data.meta&&W.workboxCacheUpdate.dispatchEvent(e)}));const t=function(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:o,onRegisterError:l}=e;let i,c;if("serviceWorker"in navigator){i=new a("./sw.js",{scope:"./"}),i.addEventListener("activated",(e=>{e.isUpdate||null==s||s()}));{const e=()=>{null==n||n()};i.addEventListener("waiting",e),i.addEventListener("externalwaiting",e)}i.register({immediate:t}).then((e=>{c=e,null==o||o(e)})).catch((e=>{null==l||l(e)}))}return async(e=!0)=>{e&&(null==i||i.addEventListener("controlling",(e=>{e.isUpdate&&window.location.reload()}))),c&&c.waiting&&await r(c.waiting,{type:"SKIP_WAITING"})}}({onNeedRefresh(){e.dispose();const n=B({updateSW:async()=>{await t(),n(),window.location.reload()}});e.add(n)}})}var q=[{path:"",name:"welcome",component:()=>O((()=>import("./Welcome.f81bd5cd.js")),["assets/Welcome.f81bd5cd.js","assets/vendor.e09d404b.js"])},{path:"/plugins",children:[{path:"race",component:()=>O((()=>import("./RacePlugin.d13dc7e4.js")),["assets/RacePlugin.d13dc7e4.js","assets/vendor.e09d404b.js","assets/FileSaver.min.ea758514.js","assets/_baseIteratee.4ebf0afb.js","assets/usePropVModel.b50a1c52.js","assets/uniqBy.7e8cf7db.js"])},{path:"training",component:()=>O((()=>import("./TrainingPlugin.fad23845.js")),["assets/TrainingPlugin.fad23845.js","assets/FileSaver.min.ea758514.js","assets/_baseIteratee.4ebf0afb.js","assets/vendor.e09d404b.js","assets/useElementSize.58e4396b.js"])}],component:()=>O((()=>import("./PluginView.3fe3e09d.js")),["assets/PluginView.3fe3e09d.js","assets/vendor.e09d404b.js"])}],F=f({history:v(),routes:q}),$=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n};const J=o({name:"App",components:{MessageList:D},setup(){const e=_(),t=function(e,t,n){const{addCleanup:a}=U(),r=d(n),s=()=>{const n=e.getItem(t);null!=n&&(r.value=JSON.parse(n))};s();const o=n=>{n.storageArea===e&&n.key===t&&s()};return window.addEventListener("storage",o),a((()=>window.removeEventListener("storage",o))),p(r,(n=>{null==n?e.removeItem(t):e.setItem(t,JSON.stringify(n))}),{deep:!0}),r}(localStorage,"lang",V.global.locale);return p(t,(e=>{V.global.locale=e}),{immediate:!0}),{route:e,lang:t,version:"89d8649"}},data:()=>({mdiArrowLeft:h,SINGLE_MODE_RACE_DATA_URL:R})}),K={class:"bg-gray-200 flex items-center gap-2"},H={class:"fill-current h-8",viewBox:"0 0 24 24"},Q=["d"],X=w("div",{class:"flex-auto"},null,-1),Y=w("a",{href:"https://github.com/NateScarlet/auto-derby-plugin-generator",class:"text-blue-400"}," GitHub ",-1);const Z=A($(J,[["render",function(e,t,n,a,r,s){const o=y("router-link"),l=y("SelectBox"),i=y("RouterView"),c=y("MessageList");return z(),b(S,null,[w("nav",K,["/"!=e.route.path?(z(),E(o,{key:0,to:"/",class:"float-left"},{default:L((()=>[(z(),b("svg",H,[w("path",{d:e.mdiArrowLeft},null,8,Q)]))])),_:1})):k("",!0),X,w("span",null,x(e.version),1),Y,j(l,{modelValue:e.lang,"onUpdate:modelValue":t[0]||(t[0]=t=>e.lang=t),options:[{key:"en",value:"en",label:"English"},{key:"zh",value:"zh",label:"中文"},{key:"jp",value:"jp",label:"日本語"}]},null,8,["modelValue"])]),j(i),j(c)],64)}]]));(async()=>{Z.use(V),Z.use(F),await async function(e){const t={"../components/global/DropdownMenu.vue":()=>O((()=>import("./DropdownMenu.75ef03ab.js")),["assets/DropdownMenu.75ef03ab.js","assets/vendor.e09d404b.js","assets/containsDeepChildNode.71c0a1fa.js"]),"../components/global/InputNumber.vue":()=>O((()=>import("./InputNumber.86947cb2.js")),["assets/InputNumber.86947cb2.js","assets/vendor.e09d404b.js","assets/usePropVModel.b50a1c52.js"]),"../components/global/SelectBox.vue":()=>O((()=>import("./SelectBox.aee16d83.js")),["assets/SelectBox.aee16d83.js","assets/vendor.e09d404b.js","assets/_baseIteratee.4ebf0afb.js","assets/containsDeepChildNode.71c0a1fa.js","assets/uniqBy.7e8cf7db.js"]),"../components/global/VirtualList.vue":()=>O((()=>import("./VirtualList.4621336f.js")),["assets/VirtualList.4621336f.js","assets/useElementSize.58e4396b.js","assets/vendor.e09d404b.js"])};await Promise.all(Object.entries(t).map((async([,t])=>{const n=(await t()).default;e.component(n.name,n)})))}(Z),Z.mount("#app"),G()})();export{R as S,$ as _,W as e,U as u};
